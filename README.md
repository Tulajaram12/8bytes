### SETTING UP OF INFRASTRUCTURE AND RUNNING THE INFRASTRUCTURE

## SETUP OF INFRASTRUCTURE
1. Installing the Terraform on AWS Cloud Services 
    follow the url https://computingforgeeks.com/how-to-install-terraform-on-ubuntu/ steps to install the terraform
2. Creating the Workspace and switch to staging
    terraform workspace new staging 
3. Creating the Working Directory for the terraform
     mkdir 8Byte_Assignment
4. Installing the hashicorp Vault
     follow the url https://developer.hashicorp.com/vault/install steps to install vault
5. Starting the vault server
      nohup vault server -config=/etc/vault.d/vault.hcl > vault.log 2>&1 &
6. Initiate the vault to unseal
      vault operator init
7. Copy the keys and store it in a some safe place for furthet usage
8. Now unseal the vault by using below command and copy the 3 keys out of 5 keys generated
     i.e we have to repeat below command 3 times and we must paste 3 different keys which was generated by above command vault operator init
      Run this below command:
        vault operator unseal
9. Now login in to vault
    sudo su - root
    vault login ROOT_TOKEN_GENERATED_FROM _COMMAND_VAULT_OPERTAOR_INIT
10. Now put your secret key 
      vault kv put my-secrets/aws aws_access_key_id=(YOUR_ACCESS_KEY_ID) aws_secret_access_key=(YOUR_SECRET_ACCESS_KEY)

11. my terraform folder structure:
     8Byte_Assignment
            |-------- backend.tf             --> The file created which pushes the terraform state file to the remote S3 Bucket
            |---------main.tf                --> Terraform Main file where all logic of creation of Infra is written
            |---------variables.tf           --> defined variables
            |---------terraform.tfvars       --> defined variable values
            |---------outputs.tf             --> Got the output values such as instanceid

13.  Why I dint use modules folder here means my already main.tf uses the terraform precreated modules i.e terraform-aws-modules
      forexample: source=terraform-aws-modules/aws/ec2

14.  Question Arises How did I write the terraform files
       1) First of all I logged into AWS Console and choose the service in the console which I want to create terraform file, lets say EC2 Service
          So I compare the UI Keywords with the terraform keywords in  a order manner so that I cannot miss any keywords 
             for Example keyword in EC2 UserInterface for Image is ami and this keyword I searched in the input section of the Terraform Modules to find out the Keyword

15   Implemented the terraform state store securely in S3 Bucket with the mechanism of locking provided by the Dynamo DB to avoid simultaneous apply 
      


## ARCHITECTURE
16   We must Implement the High Availability Architecture such as EC2 instances must be deployed across Multiple Availability Zones and We must also Implement Multi-Region Deployment
17   If Not Multi-Region Deployment Then we must plan for Disaster Recovery for the environment 
18   For DB we must plan for multi Az and we can even plan for read replicas for withstanding High Traffic and even we can enable automated snapshots and also cross region replication of 
     db snapshots 

 
## SECURITY CONSIDERATIONS AND BEST PRACTICES
19 Restrict The terraform state bucket to only to Users who are using it
20. Storing the AWS Secret key and AWS access key in Terraform Hashicorp Vault
21. Implemented the usage of AWS Secret Management for storing the password of DB in AWS Secret Managemnet
22. Implementing the DB in private Subnet
23. Restrict the Security Group administrator ports to respective VPN IP'S

## SECRETS MANAGEMENT
24. Implementing the Hashicorp vault 
25. Implementing the AWS Secret Management for secret storing of DB password


## Cost Optimisation
26. Cost optimisation can be done based on the Infra you want to create and what amount of resources your application needs
27. We can implement spot instances if your application needs it
28. Cost optimisation must not effect your performance which can be treated as a bad user experience


## RUNNING THE TERRAFORM FILE
   Once you login to Server Run below commands:
29. sudo su - root
30. nohup vault server -config=/etc/vault.d/vault.hcl > vault.log 2>&1 &
31. vault operator unseal 7WA81zEy4KFnq94FnC7zl6fnDrxsVwUt8+YLlfZHPcAj
32. vault operator unseal 7Vr/zTTGBgJbO9lsizVg024Qdk4kTkKZ7DpBmmXX1Ezl
33. vault operator unseal ebWPlnCW3+Le9npiskGrT8Y4zwX6/YcxWI35h1z1ORE2
34. cd 8Byte_ Assignment
35. terraform init
36. terraform plan
37. terraform apply

   Command to destroy the resources
38. terraform destroy








